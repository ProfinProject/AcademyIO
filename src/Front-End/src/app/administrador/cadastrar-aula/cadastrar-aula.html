<header class="bg-light border-bottom">
  <div class="container py-3">
    <div class="d-flex flex-wrap justify-content-between align-items-center">
      <h1 class="h4 fw-bold text-dark mb-0">
        <i class="fas fa-video me-2" style="color: #02a102;"></i>
        Cadastrar Nova Aula
      </h1>
      <a routerLink="/painel-administrador" class="btn btn-outline-secondary btn-sm">
        <i class="fas fa-arrow-left me-1"></i> Voltar ao Painel
      </a>
    </div>
  </div>
</header>

<main class="py-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="card border-0 shadow-sm rounded-3">
          <div class="card-body p-4 p-md-5">
            <form (ngSubmit)="onSubmit()" #lessonForm="ngForm">
              <div class="mb-4">
                <label for="course" class="form-label fw-medium">Curso <span class="text-danger">*</span></label>
                <select id="course" name="course" class="form-select" [(ngModel)]="lesson.courseId" required>
                  <option [ngValue]="undefined">Selecione um curso</option>
                  @for (course of (courses$ | async); track course.id) {
                  <option [value]="course.id">{{ course.name }}</option>
                  }
                </select>
              </div>

              <div class="mb-4">
                <label for="name" class="form-label fw-medium">Título da aula <span class="text-danger">*</span></label>
                <input type="text" id="name" name="name" class="form-control" [(ngModel)]="lesson.name" required>
              </div>

              <div class="mb-4">
                <label for="subject" class="form-label fw-medium">Descrição (Assunto)</label>
                <textarea id="subject" name="subject" class="form-control" rows="3" [(ngModel)]="lesson.subject"
                  required></textarea>
              </div>

              <div class="mb-4">
                <label for="totalHours" class="form-label fw-medium">Duração (em horas) <span
                    class="text-danger">*</span></label>
                <input type="number" id="totalHours" name="totalHours" class="form-control"
                  [(ngModel)]="lesson.totalHours" required min="0" step="0.1">
              </div>

              @if (errorMessage) {
              <div class="alert alert-danger">{{ errorMessage }}</div>
              }
              @if (successMessage) {
              <div class="alert alert-success">{{ successMessage }}</div>
              }

              <div class="d-grid">
                <button type="submit" class="btn btn-primary" [disabled]="isLoading || lessonForm.invalid">
                  @if (isLoading) {
                  <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                  <span class="ms-2">Salvando...</span>
                  } @else {
                  <span>Salvar Aula</span>
                  }
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
